# CNCåŠ å·¥æ¨¡æ‹Ÿç³»ç»Ÿ

## ğŸ“‹ æ¦‚è¿°

CNCåŠ å·¥æ¨¡æ‹Ÿç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºThree.jsçš„å®æ—¶3Då¯è§†åŒ–å¹³å°ï¼Œèƒ½å¤Ÿæ¨¡æ‹Ÿå®Œæ•´çš„CNCåŠ å·¥è¿‡ç¨‹ï¼Œä»Gä»£ç è§£æåˆ°ææ–™ç§»é™¤çš„å…¨ç¨‹å¯è§†åŒ–ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. **Gä»£ç è§£æå¼•æ“**

- æ”¯æŒæ ‡å‡†Gä»£ç æŒ‡ä»¤ï¼ˆG00, G01, G02, G03ç­‰ï¼‰
- å®æ—¶è§£æMä»£ç ï¼ˆä¸»è½´æ§åˆ¶ã€å†·å´æ¶²ç­‰ï¼‰
- è‡ªåŠ¨ç”Ÿæˆç²¾ç¡®çš„åˆ€å…·è·¯å¾„
- æ”¯æŒç»å¯¹/å¢é‡åæ ‡ç³»ç»Ÿ

### 2. **åˆ€å…·ç³»ç»Ÿ**

```typescript
interface Tool {
  name: string // åˆ€å…·åç§°
  diameter: number // ç›´å¾„(mm)
  length: number // é•¿åº¦(mm)
  type: string // ç±»å‹ï¼šendmill/drill/tap
  material: string // æè´¨ï¼šcarbide/hss
}
```

æ”¯æŒçš„åˆ€å…·ç±»å‹ï¼š

- **ç«‹é“£åˆ€**ï¼šÎ¦1-50mmï¼Œç”¨äºè½®å»“åŠ å·¥
- **é’»å¤´**ï¼šÎ¦1-20mmï¼Œç”¨äºå­”åŠ å·¥
- **ä¸é”¥**ï¼šM3-M20ï¼Œç”¨äºèºçº¹åŠ å·¥

### 3. **ææ–™ç§»é™¤ç®—æ³•**

#### CSGå¸ƒå°”è¿ç®—æ–¹æ³•

```typescript
// ä½¿ç”¨three-csg-tsåº“å®ç°ç²¾ç¡®ææ–™ç§»é™¤
import { CSG } from 'three-csg-ts'

const materialRemoval = (workpiece: Mesh, tool: Mesh) => {
  const workpieceCSG = CSG.fromMesh(workpiece)
  const toolCSG = CSG.fromMesh(tool)
  const result = workpieceCSG.subtract(toolCSG)
  return CSG.toMesh(result, workpiece.material)
}
```

#### ä½“ç´ åŒ–æ–¹æ³•

- å°†å·¥ä»¶åˆ†å‰²ä¸ºå°ä½“ç´ ç½‘æ ¼
- æ ¹æ®åˆ€å…·ä½ç½®ç§»é™¤ç›¸åº”ä½“ç´ 
- é€‚ç”¨äºå¤æ‚å½¢çŠ¶çš„ç²¾ç¡®åŠ å·¥

### 4. **åŠ¨ç”»æ—¶é—´è½´ç³»ç»Ÿ**

```typescript
class MachiningTimeline {
  currentTime: number // å½“å‰æ—¶é—´(ç§’)
  totalTime: number // æ€»æ—¶é—´(ç§’)
  speed: number // æ’­æ”¾é€Ÿåº¦(0.1-10x)
  isPlaying: boolean // æ’­æ”¾çŠ¶æ€

  play(): void // æ’­æ”¾
  pause(): void // æš‚åœ
  reset(): void // é‡ç½®
  stepForward(): void // å•æ­¥æ‰§è¡Œ
}
```

### 5. **è§†è§‰æ•ˆæœç³»ç»Ÿ**

#### åˆ‡å±‘ç²’å­æ•ˆæœ

```typescript
// ä½¿ç”¨Three.jsç²’å­ç³»ç»Ÿæ¨¡æ‹Ÿåˆ‡å±‘
const chipParticles = new THREE.Points(
  chipGeometry,
  new THREE.PointsMaterial({
    color: 0xffa500,
    size: 0.5,
    transparent: true,
  }),
)
```

#### å†·å´æ¶²æ¨¡æ‹Ÿ

- åŸºäºæµä½“ç²’å­ç³»ç»Ÿ
- æ¨¡æ‹Ÿå†·å´æ¶²å–·å°„å’ŒæµåŠ¨
- å¯é€‰æ‹©å¼€å¯/å…³é—­

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒç»„ä»¶ç»“æ„

```
MachiningSimulation.vue          // ä¸»æ¨¡æ‹Ÿç»„ä»¶
â”œâ”€â”€ GCodeParser.ts               // Gä»£ç è§£æå™¨
â”œâ”€â”€ ToolSystem.ts                // åˆ€å…·ç³»ç»Ÿ
â”œâ”€â”€ MaterialRemoval.ts           // ææ–™ç§»é™¤ç®—æ³•
â”œâ”€â”€ AnimationController.ts       // åŠ¨ç”»æ§åˆ¶å™¨
â”œâ”€â”€ ParticleEffects.ts          // ç²’å­æ•ˆæœç³»ç»Ÿ
â””â”€â”€ UI Controls                  // ç”¨æˆ·ç•Œé¢æ§åˆ¶
```

### ä¾èµ–åº“

```json
{
  "three": "^0.168.0",
  "three-csg-ts": "^3.1.13",
  "@tweenjs/tween.js": "^23.1.3"
}
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### æ¸²æŸ“æ€§èƒ½

- **å¸§ç‡**ï¼š60 FPS (1080p)
- **å‡ ä½•ä½“é¢æ•°**ï¼š< 100K ä¸‰è§’é¢
- **å†…å­˜å ç”¨**ï¼š< 500MB
- **GPUå ç”¨**ï¼š< 2GB VRAM

### ç²¾åº¦æŒ‡æ ‡

- **è·¯å¾„ç²¾åº¦**ï¼šÂ±0.01mm
- **æ—¶é—´ç²¾åº¦**ï¼šÂ±1%
- **ææ–™ç§»é™¤ç²¾åº¦**ï¼š99.5%

## ğŸ® ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬æ“ä½œ

```typescript
// åˆå§‹åŒ–æ¨¡æ‹Ÿå™¨
const simulation = new MachiningSimulation()

// åŠ è½½Gä»£ç 
simulation.loadGCode(gCodeText)

// å¼€å§‹æ¨¡æ‹Ÿ
simulation.play()

// è°ƒèŠ‚é€Ÿåº¦
simulation.setSpeed(2.0) // 2å€é€Ÿ

// å•æ­¥æ‰§è¡Œ
simulation.stepForward()
```

### 2. é«˜çº§é…ç½®

```typescript
// è‡ªå®šä¹‰åˆ€å…·
const customTool = {
  name: 'Î¦8ç«‹é“£åˆ€',
  diameter: 8,
  length: 40,
  type: 'endmill',
  material: 'carbide',
}

// ææ–™è®¾ç½®
const material = {
  type: 'stainless_steel_304',
  hardness: 'HRC25-35',
  density: 7.93, // g/cmÂ³
}

// åŠ å·¥å‚æ•°
const params = {
  spindleSpeed: 1200, // RPM
  feedRate: 200, // mm/min
  depthOfCut: 2.0, // mm
  coolant: true, // å†·å´æ¶²
}
```

## ğŸ”§ æ”¯æŒçš„Gä»£ç æŒ‡ä»¤

### Gä»£ç ï¼ˆå‡ ä½•æŒ‡ä»¤ï¼‰

| æŒ‡ä»¤ | åŠŸèƒ½       | ç¤ºä¾‹                 |
| ---- | ---------- | -------------------- |
| G00  | å¿«é€Ÿå®šä½   | `G00 X10 Y20 Z5`     |
| G01  | ç›´çº¿æ’è¡¥   | `G01 X30 Y40 F200`   |
| G02  | é¡ºæ—¶é’ˆåœ†å¼§ | `G02 X20 Y30 I10 J0` |
| G03  | é€†æ—¶é’ˆåœ†å¼§ | `G03 X20 Y30 I10 J0` |
| G17  | XYå¹³é¢é€‰æ‹© | `G17`                |
| G21  | å…¬åˆ¶å•ä½   | `G21`                |
| G90  | ç»å¯¹åæ ‡   | `G90`                |
| G91  | å¢é‡åæ ‡   | `G91`                |

### Mä»£ç ï¼ˆè¾…åŠ©åŠŸèƒ½ï¼‰

| æŒ‡ä»¤ | åŠŸèƒ½     | ç¤ºä¾‹        |
| ---- | -------- | ----------- |
| M03  | ä¸»è½´æ­£è½¬ | `M03 S1200` |
| M04  | ä¸»è½´åè½¬ | `M04 S800`  |
| M05  | ä¸»è½´åœæ­¢ | `M05`       |
| M08  | å†·å´æ¶²å¼€ | `M08`       |
| M09  | å†·å´æ¶²å…³ | `M09`       |
| M30  | ç¨‹åºç»“æŸ | `M30`       |

## ğŸ“ˆ å®æ—¶ç»Ÿè®¡ä¿¡æ¯

### åŠ å·¥æ•°æ®

- **ææ–™ç§»é™¤é‡**ï¼šå®æ—¶è®¡ç®—åˆ‡å‰Šä½“ç§¯
- **åŠ å·¥æ—¶é—´**ï¼šåŸºäºè¿›ç»™é€Ÿåº¦çš„ç²¾ç¡®ä¼°ç®—
- **åˆ€å…·è·¯å¾„é•¿åº¦**ï¼šæ€»ç§»åŠ¨è·ç¦»
- **èƒ½è€—ä¼°ç®—**ï¼šåŸºäºä¸»è½´åŠŸç‡è®¡ç®—

### è´¨é‡ç›‘æ§

- **è¡¨é¢ç²—ç³™åº¦é¢„æµ‹**ï¼šRaå€¼ä¼°ç®—
- **å°ºå¯¸ç²¾åº¦åˆ†æ**ï¼šå…¬å·®å¸¦åˆ†æ
- **åˆ€å…·ç£¨æŸé¢„æµ‹**ï¼šåŸºäºåˆ‡å‰Šå‚æ•°

## ğŸ¨ è§†è§‰ç‰¹æ•ˆ

### æè´¨æ¸²æŸ“

```typescript
// ä¸é”ˆé’¢304æè´¨
const stainlessSteelMaterial = new THREE.MeshPhysicalMaterial({
  color: 0xf0f0f0,
  metalness: 0.95,
  roughness: 0.05,
  clearcoat: 0.3,
  clearcoatRoughness: 0.1,
})

// ç¡¬è´¨åˆé‡‘åˆ€å…·æè´¨
const carbideToolMaterial = new THREE.MeshPhysicalMaterial({
  color: 0x404040,
  metalness: 0.9,
  roughness: 0.1,
  emissive: 0x001122,
  emissiveIntensity: 0.1,
})
```

### å…‰å½±ç³»ç»Ÿ

- **ç¯å¢ƒå…‰**ï¼šæ¨¡æ‹Ÿè½¦é—´ç…§æ˜
- **å®šå‘å…‰**ï¼šä¸»å…‰æºï¼Œäº§ç”Ÿé˜´å½±
- **ç‚¹å…‰æº**ï¼šå±€éƒ¨ç…§æ˜å¢å¼º
- **HDRIç¯å¢ƒè´´å›¾**ï¼šçœŸå®åå°„æ•ˆæœ

## ğŸ”® æœªæ¥æ‰©å±•

### è®¡åˆ’åŠŸèƒ½

1. **å¤šè½´åŠ å·¥**ï¼šæ”¯æŒ4è½´ã€5è½´åŠ å·¥ä¸­å¿ƒ
2. **åˆ€å…·åº“ç®¡ç†**ï¼šå®Œæ•´çš„åˆ€å…·æ•°æ®åº“
3. **åŠ å·¥å·¥è‰ºä¼˜åŒ–**ï¼šè‡ªåŠ¨ä¼˜åŒ–åˆ‡å‰Šå‚æ•°
4. **ç¢°æ’æ£€æµ‹**ï¼šå®æ—¶ç¢°æ’é¢„è­¦
5. **å£°éŸ³æ¨¡æ‹Ÿ**ï¼šçœŸå®çš„åŠ å·¥å£°æ•ˆ
6. **VRæ”¯æŒ**ï¼šè™šæ‹Ÿç°å®æ²‰æµ¸å¼ä½“éªŒ

### é«˜çº§ç®—æ³•

- **è‡ªé€‚åº”è¿›ç»™**ï¼šæ ¹æ®ææ–™ç¡¬åº¦è°ƒèŠ‚
- **åˆ€å…·è·¯å¾„ä¼˜åŒ–**ï¼šæœ€çŸ­è·¯å¾„ç®—æ³•
- **çƒ­å˜å½¢åˆ†æ**ï¼šè€ƒè™‘çƒ­è†¨èƒ€å½±å“
- **æŒ¯åŠ¨åˆ†æ**ï¼šé¢¤æŒ¯é¢„æµ‹å’Œé¿å…

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **LODç³»ç»Ÿ**ï¼šè·ç¦»ç›¸å…³çš„ç»†èŠ‚å±‚æ¬¡
2. **å®ä¾‹åŒ–æ¸²æŸ“**ï¼šæ‰¹é‡æ¸²æŸ“ç›¸åŒå‡ ä½•ä½“
3. **Web Workers**ï¼šåå°è®¡ç®—Gä»£ç è§£æ
4. **å†…å­˜ç®¡ç†**ï¼šåŠæ—¶é‡Šæ”¾ä¸ç”¨çš„èµ„æº

### å¸¸è§é—®é¢˜

- **Q**: æ¨¡æ‹Ÿé€Ÿåº¦æ…¢æ€ä¹ˆåŠï¼Ÿ
- **A**: é™ä½å‡ ä½•ä½“ç²¾åº¦ï¼Œå¼€å¯LODç³»ç»Ÿ

- **Q**: å†…å­˜å ç”¨è¿‡é«˜ï¼Ÿ
- **A**: å‡å°‘ç²’å­æ•°é‡ï¼Œä½¿ç”¨çº¹ç†è´´å›¾æ›¿ä»£å‡ ä½•ä½“

- **Q**: Gä»£ç è§£æé”™è¯¯ï¼Ÿ
- **A**: æ£€æŸ¥Gä»£ç æ ¼å¼ï¼Œç¡®ä¿ç¬¦åˆæ ‡å‡†è¯­æ³•

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶

---

**å¼€å‘å›¢é˜Ÿ**: CNC 3D å¯è§†åŒ–é¡¹ç›®ç»„  
**æ›´æ–°æ—¥æœŸ**: 2024å¹´12æœˆ  
**ç‰ˆæœ¬**: v1.0.0
